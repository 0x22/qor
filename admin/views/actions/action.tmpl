{{$context := .}}
{{$action_mode := .Context.Request.URL.Query.Get "action_mode"}}
{{$allowed_actions := (allowed_actions $context.Resource.Actions $context.Action)}}
{{if gt (len $allowed_actions) 0 }}

  <div class="qor-action-bulk-buttons">
    <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-action--bulk" type="button">{{t "Bulk Edit"}}</button>
    <button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-action--exit-bulk hidden" type="button">{{t "Exit Bulk Edit"}}</button>
  </div>

  <div class="qor-action-forms hidden">
    {{range $allowed_actions}}
      <div class="qor-js-form action-form" data-action="{{.ToParam}}">
        <form action="/admin/{{$context.Resource.ToParam}}/{{.ToParam}}" method="POST" enctype="multipart/form-data" data-mode="{{$context.Action}}">
          <input name="_method" value="PUT" type="hidden">
          {{if or (eq $context.Action "edit") (eq $context.Action "show") }}
            <input type="hidden" name="primary_values[]" value="{{$context.Resource.GetPrimaryValue $context.Request}}" />
          {{end}}

          {{if .Resource}}
            {{render_form .Resource.NewStruct (edit_sections .Resource) }}
          {{end}}

          <div class="qor-form__actions">
            <button class="mdl-button mdl-button--colored mdl-button--raised mdl-js-button mdl-js-ripple-effect qor-button--save" type="submit">{{t .Label}}</button>
          </div>
        </form>
      </div>
    {{end}}
  </div>
{{end}}
