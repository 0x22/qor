!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):i("object"==typeof exports?require("jquery"):jQuery)}(function(i){"use strict";function t(o,e){this.$element=i(o),this.options=i.extend({},t.DEFAULTS,i.isPlainObject(e)&&e),this.loading=!1,this.init()}var o="qor.publish",e="click."+o,n="shown.bs.modal",s="hidden.bs.modal";t.prototype={constructor:t,init:function(){var t=this.options,o=this.$element;this.$modal=o.find(t.modal),i.fn.tooltip&&o.find(t.toggleCheck).tooltip(),this.bind()},bind:function(){this.$element.on(e,i.proxy(this.click,this)),this.$modal.on(n,function(){i(this).trigger("enable.qor.textviewer")}).on(s,function(){i(this).trigger("disable.qor.textviewer")})},unbind:function(){this.$element.off(e,this.click),this.$modal.off(n).off(s)},click:function(t){var o=this.options,e=i(t.target);if(e.is(o.toggleView)){if(t.preventDefault(),this.loading)return;this.loading=!0,this.$modal.find(".modal-body").empty().load(e.data("url"),i.proxy(this.show,this))}else e.is(o.toggleCheck)&&(e.prop("disabled")||e.closest("table").find(":checkbox").not(e).prop("checked",e.prop("checked")))},show:function(){this.loading=!1,this.$modal.modal("show")},destroy:function(){this.unbind(),this.$element.removeData(o)}},t.DEFAULTS={modal:".qor-publish-modal",toggleView:".qor-action-diff",toggleCheck:".qor-check-all"},t.plugin=function(e){return this.each(function(){var n,s=i(this),l=s.data(o);if(!l){if(!i.fn.modal)return;s.data(o,l=new t(this,e))}"string"==typeof e&&i.isFunction(n=l[e])&&n.apply(l)})},i(function(){t.plugin.call(i(".qor-publish"))})});